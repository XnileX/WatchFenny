<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>WatchFenny</title>
<script src="https://cdn.tailwindcss.com"></script>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<!-- Adsterra script (safe to leave public) -->
<script type='text/javascript' src='//pl27706575.revenuecpmgate.com/43/08/fd/4308fd0c92978073c8ed9c0d58c16d99.js'></script>
<style>
/* (your styles unchanged) */
</style>
</head>
<body class="text-white">

<!-- (your HTML layout unchanged: navbar, banner, rows, modal, footer) -->

<script>
const IMAGE_BASE_URL = 'https://image.tmdb.org/t/p/original/';
const ADSTERRA_URL = 'https://www.revenuecpmgate.com/nrmw6hswh7?key=cab87f7f10cb11cbed7a223557a84eee';

// --- API requests (without key now) ---
const requests = {
    fetchNetflixOriginals: `/discover/tv?with_networks=213`,
    fetchTrending: `/trending/all/week?language=en-US`,
    fetchTopRated: `/movie/top_rated?language=en-US`,
    fetchActionMovies: `/discover/movie?with_genres=28`,
    fetchComedyMovies: `/discover/movie?with_genres=35`,
    fetchHorrorMovies: `/discover/movie?with_genres=27`,
    fetchRomanceMovies: `/discover/movie?with_genres=10749`,
    fetchSciFiMovies: `/discover/movie?with_genres=878`,
    fetchThrillerMovies: `/discover/movie?with_genres=53`,
    fetchAnimationMovies: `/discover/movie?with_genres=16`,
    fetchTvShows: `/discover/tv?with_genres=10759`,
    fetchDocumentaries: `/discover/movie?with_genres=99`,
};

// --- Fetch wrappers calling Netlify function ---
async function fetchData(endpoint) {
    try {
        const response = await fetch(`/.netlify/functions/movie?endpoint=${encodeURIComponent(endpoint)}`);
        if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
        const data = await response.json();
        return data.results || [];
    } catch (error) {
        console.error("Error fetching data:", error);
        return [];
    }
}

async function fetchMovieDetails(movieId, mediaType) {
    const type = mediaType === 'tv' ? 'tv' : 'movie';
    try {
        const url = `/.netlify/functions/movie?endpoint=/${type}/${movieId}?language=en-US&append_to_response=videos,watch/providers`;
        const response = await fetch(url);
        if (!response.ok) throw new Error('Failed to fetch details');
        return await response.json();
    } catch (error) {
        console.error("Error fetching movie details:", error);
        return null;
    }
}

// (everything else in your <script> remains unchanged: truncate, createMovieRow, modal logic, init, UI effects)
</script>
</body>
</html>
